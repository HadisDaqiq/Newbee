{% extends 'base.html' %}

{%block head%}
<title> Homepage</title>
{%endblock head%} 

{%block content%}

    <h2>Events</h2>

       <button class="" id = "start-event-btn"> 
        Start a event
      </button>

        {% for event in events %}
            <a href='/{{event.event_id}}'>
<div class="card" style="width: 18rem;">
                <img class="card-img-top" src="https://m.media-amazon.com/images/S/aplus-media/vc/7895a621-9359-412d-92d2-94c15adc4c70.jpg" alt="Card image cap">
            <div class="card-body">
                <h5 class="card-title"> {{event.title}}</h5>
                <p class="card-text"> Detail: {{event.description}}</p>
            </div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">Location: {{event.location}}</li>
        <li class="list-group-item">Time: {{event.start_date}} to {{event.end_date}}</li>
      </ul>
      <div class="card-body">
        <a href="#" class="card-link">Join </a>
        <a href="#" class="card-link">Another link</a>
      </div>
        {%endfor%}

    </ul>
    </div>
</div>


<div id = "save-event-popup" style = "display: none">
    <div class = "popup-content">

    

    <form action= "/event" id = "prevent-form-submission-form" method= "GET">
        Title
        <input type= "text" name= "title">
        <br>
        Description
        <input type= "text" name="des">
        <br>
        Location
        <input type= "text" name="location">
        <br>
        Start Date - End Date
        <input type= "text" name="start_date">
        <input type = "text" name="end_date">

        <input type="submit" name="create" value="Create">
      
    </form>

    </div>

</div>

<script>



    //prevents the default autmatic exit at the pop up form of creating event.
    let stalledForm = document.querySelector("#prevent-form-submission-form");

    stalledForm.addEventListener("click", function (evt) {
    //it prevents browser fro but it doesnt stop propagation
    evt.preventDefault();
    //it is stoping 
    evt.stopPropagation();
    
    });


    //after clicking on starting event button and making the pop up form appear.
    $("#start-event-btn").on('click', ()=>{
        console.log("it is working!")
        $("#save-event-popup").show()
    })

    //exit out of popup once it clicks exit or outside of the form.(Gray area)
    $("#save-event-popup").on('click', ()=>{
         $("#save-event-popup").hide()
    })
</script>

 {%endblock content%}   

